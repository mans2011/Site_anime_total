(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{6107:(e,t,r)=>{Promise.resolve().then(r.bind(r,8007))},8007:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(5155),a=r(2115),i=r(6874),n=r.n(i),l=r(5695),o=r(8350);function d(){let[e,t]=(0,a.useState)(!0),[r,i]=(0,a.useState)({name:"",email:"",password:"",confirmPassword:""}),[d,m]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),h=(0,l.useRouter)();(0,a.useEffect)(()=>{o.x.getCurrentUser()&&h.push("/")},[h]);let g=async t=>{t.preventDefault(),m(""),u(!0);try{if(e){if(!r.email||!r.password){m("Preencha todos os campos"),u(!1);return}let e=o.x.findUserByEmail(r.email.toLowerCase().trim());if(!e){m("Email ou senha incorretos"),u(!1);return}o.x.setCurrentUser(e),h.push("/")}else{if(!r.name||!r.email||!r.password||!r.confirmPassword){m("Preencha todos os campos"),u(!1);return}if(r.password!==r.confirmPassword){m("As senhas n\xe3o coincidem"),u(!1);return}if(r.password.length<6){m("A senha deve ter pelo menos 6 caracteres"),u(!1);return}if(!/\S+@\S+\.\S+/.test(r.email)){m("Email inv\xe1lido"),u(!1);return}if(o.x.findUserByEmail(r.email.toLowerCase().trim())){m("Este email j\xe1 est\xe1 em uso"),u(!1);return}let e={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:r.name.trim(),email:r.email.toLowerCase().trim(),watchlist:[],favorites:[],watchHistory:[],ratings:[]};o.x.setCurrentUser(e),h.push("/")}}catch(e){console.error("Erro no login/registro:",e),m("Erro interno. Tente novamente.")}finally{u(!1)}},f=e=>{m(""),i({...r,[e.target.name]:e.target.value})};return(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-cover bg-center relative",style:{backgroundImage:"linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://readdy.ai/api/search-image?query=beautiful%20anime%20cityscape%20at%20night%20with%20neon%20lights%20and%20modern%20buildings%2C%20cyberpunk%20style%20urban%20landscape%2C%20colorful%20lighting%20effects%2C%20high%20quality%20digital%20art%20background&width=1920&height=1080&seq=login1&orientation=landscape')"},children:[(0,s.jsx)("div",{className:"absolute top-6 left-6",children:(0,s.jsx)(n(),{href:"/",className:"flex items-center text-red-600 text-2xl font-['Pacifico'] font-bold cursor-pointer",children:"AnimeFlix"})}),(0,s.jsxs)("div",{className:"bg-black/90 backdrop-blur-sm p-8 rounded-2xl shadow-2xl w-full max-w-md mx-4",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:e?"Entrar":"Criar Conta"}),(0,s.jsx)("p",{className:"text-gray-400",children:e?"Entre para acessar sua conta":"Crie sua conta e comece a assistir"})]}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[!e&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-white text-sm font-medium mb-2",children:"Nome Completo"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:r.name,onChange:f,required:!e,className:"w-full px-4 py-3 bg-gray-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 border border-gray-700",placeholder:"Digite seu nome"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-white text-sm font-medium mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:r.email,onChange:f,required:!0,className:"w-full px-4 py-3 bg-gray-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 border border-gray-700",placeholder:"Digite seu email"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-white text-sm font-medium mb-2",children:"Senha"}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",value:r.password,onChange:f,required:!0,className:"w-full px-4 py-3 bg-gray-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 border border-gray-700",placeholder:"Digite sua senha"})]}),!e&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-white text-sm font-medium mb-2",children:"Confirmar Senha"}),(0,s.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:f,required:!e,className:"w-full px-4 py-3 bg-gray-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 border border-gray-700",placeholder:"Confirme sua senha"})]}),d&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg",children:d}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer",children:c?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),e?"Entrando...":"Criando conta..."]}):e?"Entrar":"Criar Conta"})]}),(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsx)("p",{className:"text-gray-400",children:e?"N\xe3o tem uma conta?":"J\xe1 tem uma conta?"}),(0,s.jsx)("button",{onClick:()=>{t(!e),m(""),i({name:"",email:"",password:"",confirmPassword:""})},className:"text-red-500 hover:text-red-400 font-semibold mt-1 cursor-pointer",children:e?"Criar conta":"Fazer login"})]})]})]})}},8350:(e,t,r)=>{"use strict";r.d(t,{x:()=>a,z:()=>i});let s={CURRENT_USER:"animeflix_current_user",USERS:"animeflix_users",COMMENTS:"animeflix_comments"},a={getCurrentUser(){let e=localStorage.getItem(s.CURRENT_USER);return e?JSON.parse(e):null},setCurrentUser(e){e?(localStorage.setItem(s.CURRENT_USER,JSON.stringify(e)),this.saveUser(e)):localStorage.removeItem(s.CURRENT_USER)},saveUser(e){let t=this.getAllUsers(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.push(e),localStorage.setItem(s.USERS,JSON.stringify(t))},getAllUsers(){let e=localStorage.getItem(s.USERS);return e?JSON.parse(e):[]},findUserByEmail(e){return this.getAllUsers().find(t=>t.email===e)||null},addToWatchlist(e){let t=this.getCurrentUser();t&&(t.watchlist.includes(e)||(t.watchlist.push(e),this.setCurrentUser(t)))},removeFromWatchlist(e){let t=this.getCurrentUser();t&&(t.watchlist=t.watchlist.filter(t=>t!==e),this.setCurrentUser(t))},addToFavorites(e){let t=this.getCurrentUser();t&&(t.favorites.includes(e)||(t.favorites.push(e),this.setCurrentUser(t)))},removeFromFavorites(e){let t=this.getCurrentUser();t&&(t.favorites=t.favorites.filter(t=>t!==e),this.setCurrentUser(t))},addToWatchHistory(e,t){let r=this.getCurrentUser();if(!r)return;let s=r.watchHistory.findIndex(t=>t.animeId===e),a={animeId:e,watchedAt:new Date().toISOString(),episodeNumber:t};s>=0?r.watchHistory[s]=a:r.watchHistory.unshift(a),r.watchHistory.length>100&&(r.watchHistory=r.watchHistory.slice(0,100)),this.setCurrentUser(r)},rateAnime(e,t){let r=this.getCurrentUser();if(!r)return;let s=r.ratings.findIndex(t=>t.animeId===e),a={animeId:e,rating:t,ratedAt:new Date().toISOString()};s>=0?r.ratings[s]=a:r.ratings.push(a),this.setCurrentUser(r)},getUserRating(e){let t=this.getCurrentUser();if(!t)return null;let r=t.ratings.find(t=>t.animeId===e);return r?r.rating:null}},i={getComments(e){let t=localStorage.getItem(s.COMMENTS);return(t?JSON.parse(t):[]).filter(t=>t.animeId===e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())},addComment(e,t,r){let i=a.getCurrentUser();if(!i)return null;let n={id:Date.now().toString()+Math.random().toString(36).substr(2,9),animeId:e,userId:i.id,userName:i.name,userAvatar:i.avatar,text:t,rating:r,createdAt:new Date().toISOString()},l=localStorage.getItem(s.COMMENTS),o=l?JSON.parse(l):[];return o.push(n),localStorage.setItem(s.COMMENTS,JSON.stringify(o)),r&&a.rateAnime(e,r),n},deleteComment(e){let t=a.getCurrentUser();if(!t)return;let r=localStorage.getItem(s.COMMENTS),i=(r?JSON.parse(r):[]).filter(r=>r.id!==e||r.userId===t.id);localStorage.setItem(s.COMMENTS,JSON.stringify(i))}}}},e=>{e.O(0,[244,441,964,358],()=>e(e.s=6107)),_N_E=e.O()}]);